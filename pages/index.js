import fs from 'fs'
import path from 'path'
import matter from 'gray-matter'
import Head from 'next/head'
import Post from '../components/Post'
import {sortByDate} from '../utils'
import Link from 'next/link'

export default function Home({ posts }) {
  return (
    <div>
      <Head>
        <title>Pushblock.io</title>
      </Head>
   
    <div className='main-intro'>
      <img className='logo' alt="pfp" src='/pfp.png'></img>
      <div>
      <p className='intro'>Personal Blog by Justin Ando <br/>A place for coding and finance.</p>

    <div className='social-icons'>
   
    <a href="https://github.com/andojustin1337">
    <svg className='github' width="48" height="46" viewBox="0 0 48 46" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fillRule="evenodd" clipRule="evenodd" d="M24 2.09C11.89 2.09 2.086 11.844 2.086 23.856C2.086 32.676 7.372 40.266 14.98 43.68C15.776 44.038 16.554 43.896 17.162 43.44C17.4982 43.1782 17.7693 42.842 17.9539 42.4579C18.1385 42.0738 18.2316 41.6521 18.226 41.226V40.086L15.512 39.718C15.4919 39.7153 15.4719 39.712 15.452 39.708C13.956 39.416 12.946 38.89 12.206 38.132C11.584 37.494 11.204 36.73 10.882 36.082L10.77 35.856C10.4724 35.2352 10.1474 34.628 9.796 34.036C9.526 33.608 9.316 33.388 9.108 33.25C8.58 32.9 8.072 32.306 8.072 31.564C8.0702 31.3504 8.11592 31.1391 8.20586 30.9454C8.29579 30.7517 8.42769 30.5804 8.592 30.444C8.90211 30.1985 9.2886 30.0696 9.684 30.08C10.128 30.08 10.546 30.216 10.894 30.372C11.25 30.532 11.604 30.744 11.934 30.964C12.738 31.5 13.53 32.134 14.2 32.916C14.898 33.728 15.392 34.244 16.136 34.35C16.748 34.438 17.372 34.44 17.858 34.418C17.9255 34.0332 18.0369 33.6574 18.19 33.298C17.5964 33.1595 17.0109 32.9886 16.436 32.786C15.128 32.322 13.67 31.6 12.69 30.506C11.614 29.302 10.948 28.228 10.576 26.972C10.214 25.748 10.154 24.422 10.154 22.79C10.154 20.29 11.236 18.184 12.048 17.066C11.736 16.0872 11.5118 15.0826 11.378 14.064C11.2894 13.4217 11.2901 12.7702 11.38 12.128C11.48 11.542 11.73 10.822 12.388 10.388C13.022 9.966 13.766 9.984 14.346 10.092C14.948 10.206 15.574 10.456 16.15 10.742C17.088 11.206 18.02 11.826 18.718 12.352C19.922 11.998 22.052 11.542 23.978 11.5H24.022C25.95 11.542 27.984 11.998 29.158 12.35C29.858 11.826 30.788 11.204 31.724 10.742C32.3 10.456 32.924 10.206 33.528 10.092C34.108 9.984 34.852 9.966 35.488 10.386C36.144 10.822 36.396 11.542 36.494 12.128C36.596 12.738 36.572 13.42 36.494 14.064C36.3608 15.0825 36.1372 16.0871 35.826 17.066C36.638 18.186 37.72 20.292 37.72 22.79C37.72 24.422 37.66 25.748 37.3 26.97C36.926 28.23 36.26 29.302 35.184 30.506C34.204 31.6 32.746 32.322 31.438 32.786C30.7437 33.03 30.0342 33.2285 29.314 33.38C29.56 34.124 29.648 34.726 29.648 35.072V41.252C29.648 42.192 30.086 42.994 30.708 43.462C31.312 43.92 32.088 44.062 32.884 43.714C40.564 40.33 45.912 32.72 45.912 23.854C45.912 11.844 36.112 2.09 24 2.09ZM18.952 36.42C18.432 36.494 18.95 36.42 18.95 36.42H18.944L18.928 36.424L18.87 36.432C18.5729 36.4669 18.2748 36.4916 17.976 36.506C17.2642 36.5431 16.5505 36.5143 15.844 36.42C14.262 36.196 13.3 35.076 12.678 34.348L12.618 34.28C12.4146 34.0441 12.1962 33.8216 11.964 33.614C12.17 33.994 12.384 34.418 12.614 34.874L12.634 34.914L12.736 35.122C13.086 35.818 13.316 36.282 13.698 36.67C14.07 37.05 14.65 37.418 15.822 37.65L19.41 38.136C19.6606 38.1699 19.8904 38.2936 20.0566 38.4842C20.2229 38.6747 20.3143 38.9191 20.314 39.172V41.226C20.314 42.826 19.564 44.252 18.414 45.116C17.8102 45.5773 17.092 45.8651 16.3367 45.9483C15.5814 46.0315 14.8177 45.9069 14.128 45.588C5.804 41.854 0 33.54 0 23.856C0 10.672 10.754 0 24 0C37.246 0 48 10.672 48 23.856C48 33.59 42.122 41.926 33.726 45.628C33.0357 45.9408 32.2734 46.0601 31.5206 45.9731C30.7677 45.8861 30.0527 45.5961 29.452 45.134C28.858 44.6767 28.3781 44.0881 28.0499 43.4142C27.7216 42.7403 27.5539 41.9996 27.56 41.25V35.07C27.56 34.93 27.462 34.122 26.916 33.036C26.8406 32.8854 26.8027 32.7189 26.8053 32.5505C26.808 32.3821 26.8511 32.2169 26.9312 32.0687C27.0113 31.9206 27.1258 31.7939 27.2652 31.6994C27.4046 31.605 27.5647 31.5455 27.732 31.526C28.7573 31.3975 29.7658 31.1588 30.74 30.814C31.928 30.394 32.994 29.818 33.628 29.11C34.57 28.058 35.04 27.25 35.298 26.376C35.566 25.47 35.634 24.416 35.634 22.79C35.634 20.508 34.434 18.59 33.882 17.972C33.7567 17.8323 33.6713 17.6615 33.6347 17.4775C33.5981 17.2935 33.6117 17.103 33.674 16.926C34.0295 15.9183 34.2808 14.8769 34.424 13.818C34.488 13.268 34.492 12.808 34.436 12.476C34.4235 12.3546 34.3867 12.237 34.328 12.13C34.1903 12.1062 34.0491 12.1123 33.914 12.148C33.574 12.212 33.14 12.372 32.648 12.616C31.668 13.1 30.648 13.816 30.016 14.328C29.8766 14.4411 29.7104 14.5162 29.5334 14.5459C29.3564 14.5757 29.1747 14.5592 29.006 14.498C27.3867 13.9683 25.7023 13.6634 24 13.592C21.986 13.64 19.662 14.212 18.868 14.498C18.6993 14.5592 18.5176 14.5757 18.3406 14.5459C18.1636 14.5162 17.9974 14.4411 17.858 14.328C17.0407 13.67 16.1588 13.0964 15.226 12.616C14.8254 12.4056 14.3992 12.2483 13.958 12.148C13.8235 12.1126 13.683 12.1065 13.546 12.13C13.4872 12.2369 13.4505 12.3546 13.438 12.476C13.382 12.808 13.386 13.268 13.45 13.818C13.5941 14.8767 13.8454 15.9181 14.2 16.926C14.326 17.286 14.248 17.686 13.992 17.972C13.44 18.59 12.24 20.508 12.24 22.79C12.24 24.414 12.308 25.47 12.576 26.376C12.836 27.25 13.304 28.056 14.244 29.11C14.88 29.818 15.944 30.394 17.134 30.814C18.1075 31.1585 19.1154 31.3972 20.14 31.526C20.3508 31.5486 20.5497 31.6349 20.7103 31.7733C20.8709 31.9118 20.9855 32.0959 21.0389 32.301C21.0923 32.5062 21.082 32.7228 21.0093 32.922C20.9366 33.1211 20.805 33.2935 20.632 33.416C20.302 33.652 20.084 34.076 19.962 34.566C19.899 34.8183 19.8615 35.0762 19.85 35.336V35.374C19.8525 35.6276 19.7629 35.8735 19.5977 36.0659C19.4325 36.2583 19.203 36.3841 18.952 36.42V36.42Z" fill="white"/>
    </svg>
    </a>

    <a href="https://twitter.com/jstn_ando">
    <svg className='twitter'width="50" height="44" viewBox="0 0 50 44" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M49.9976 5.35794C48.1254 6.25199 46.1397 6.83885 44.1063 7.09899C46.2243 5.73057 47.8505 3.56362 48.6162 0.981727C46.6029 2.2697 44.4001 3.17715 42.103 3.66489C40.2319 1.51604 37.5664 0.173096 34.6161 0.173096C28.9514 0.173096 24.3587 5.12383 24.3587 11.2299C24.3587 12.0967 24.4495 12.9405 24.6243 13.7499C16.0997 13.2887 8.54184 8.88678 3.48277 2.1971C2.60004 3.83015 2.09423 5.72973 2.09423 7.75583C2.09423 11.592 3.90519 14.9763 6.65726 16.9592C5.02841 16.9042 3.4354 16.43 2.01123 15.576C2.01064 15.6224 2.01064 15.6687 2.01064 15.7152C2.01064 21.0725 5.54624 25.5415 10.2384 26.5573C8.72793 27.0001 7.1436 27.0649 5.60639 26.7468C6.91153 31.1396 10.6996 34.3363 15.1879 34.4257C11.6775 37.3912 7.25466 39.159 2.44927 39.159C1.62123 39.159 0.804902 39.1066 0.00244141 39.0045C4.54165 42.1417 9.93311 43.9722 15.7255 43.9722C34.5922 43.9722 44.909 27.1236 44.909 12.5123C44.909 12.0327 44.8992 11.5558 44.8793 11.0817C46.8874 9.51685 48.6206 7.5786 49.9976 5.35794" fill="white"/>
    </svg>
    </a>

    <a href="https://www.instagram.com/justinando/">
    <svg className='instagram'width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fillRule="evenodd" clipRule="evenodd" d="M14.93 2.132C17.276 2.024 18.024 2 24 2C29.976 2 30.724 2.026 33.068 2.132C35.412 2.238 37.012 2.612 38.412 3.154C39.878 3.708 41.208 4.574 42.308 5.694C43.428 6.792 44.292 8.12 44.844 9.588C45.388 10.988 45.76 12.588 45.868 14.928C45.976 17.278 46 18.026 46 24C46 29.976 45.974 30.724 45.868 33.07C45.762 35.41 45.388 37.01 44.844 38.41C44.292 39.8782 43.4266 41.2084 42.308 42.308C41.208 43.428 39.878 44.292 38.412 44.844C37.012 45.388 35.412 45.76 33.072 45.868C30.724 45.976 29.976 46 24 46C18.024 46 17.276 45.974 14.93 45.868C12.59 45.762 10.99 45.388 9.59 44.844C8.12184 44.2919 6.79164 43.4265 5.692 42.308C4.57276 41.2093 3.70663 39.8798 3.154 38.412C2.612 37.012 2.24 35.412 2.132 33.072C2.024 30.722 2 29.974 2 24C2 18.024 2.026 17.276 2.132 14.932C2.238 12.588 2.612 10.988 3.154 9.588C3.70745 8.12016 4.57424 6.79063 5.694 5.692C6.79208 4.573 8.12094 3.70689 9.588 3.154C10.988 2.612 12.588 2.24 14.928 2.132H14.93ZM32.89 6.092C30.57 5.986 29.874 5.964 24 5.964C18.126 5.964 17.43 5.986 15.11 6.092C12.964 6.19 11.8 6.548 11.024 6.85C9.998 7.25 9.264 7.724 8.494 8.494C7.76409 9.2041 7.20236 10.0686 6.85 11.024C6.548 11.8 6.19 12.964 6.092 15.11C5.986 17.43 5.964 18.126 5.964 24C5.964 29.874 5.986 30.57 6.092 32.89C6.19 35.036 6.548 36.2 6.85 36.976C7.202 37.93 7.764 38.796 8.494 39.506C9.204 40.236 10.07 40.798 11.024 41.15C11.8 41.452 12.964 41.81 15.11 41.908C17.43 42.014 18.124 42.036 24 42.036C29.876 42.036 30.57 42.014 32.89 41.908C35.036 41.81 36.2 41.452 36.976 41.15C38.002 40.75 38.736 40.276 39.506 39.506C40.236 38.796 40.798 37.93 41.15 36.976C41.452 36.2 41.81 35.036 41.908 32.89C42.014 30.57 42.036 29.874 42.036 24C42.036 18.126 42.014 17.43 41.908 15.11C41.81 12.964 41.452 11.8 41.15 11.024C40.75 9.998 40.276 9.264 39.506 8.494C38.7959 7.76414 37.9314 7.20242 36.976 6.85C36.2 6.548 35.036 6.19 32.89 6.092V6.092ZM21.19 30.782C22.7593 31.4353 24.5068 31.5234 26.1339 31.0314C27.761 30.5395 29.1668 29.4978 30.1112 28.0845C31.0557 26.6711 31.4801 24.9737 31.3121 23.2822C31.1441 21.5907 30.394 20.0099 29.19 18.81C28.4225 18.043 27.4944 17.4556 26.4727 17.0903C25.4509 16.725 24.3609 16.5907 23.281 16.6972C22.2011 16.8037 21.1583 17.1484 20.2276 17.7063C19.2969 18.2642 18.5015 19.0215 17.8986 19.9237C17.2957 20.8259 16.9004 21.8506 16.741 22.9239C16.5817 23.9973 16.6623 25.0926 16.9771 26.131C17.2919 27.1695 17.833 28.1252 18.5614 28.9294C19.2899 29.7337 20.1876 30.3664 21.19 30.782ZM16.004 16.004C17.054 14.954 18.3006 14.121 19.6726 13.5527C21.0446 12.9844 22.515 12.6919 24 12.6919C25.485 12.6919 26.9554 12.9844 28.3274 13.5527C29.6994 14.121 30.946 14.954 31.996 16.004C33.046 17.054 33.879 18.3006 34.4473 19.6726C35.0156 21.0446 35.3081 22.515 35.3081 24C35.3081 25.485 35.0156 26.9554 34.4473 28.3274C33.879 29.6994 33.046 30.946 31.996 31.996C29.8753 34.1167 26.9991 35.3081 24 35.3081C21.0009 35.3081 18.1247 34.1167 16.004 31.996C13.8833 29.8753 12.6919 26.9991 12.6919 24C12.6919 21.0009 13.8833 18.1247 16.004 16.004V16.004ZM37.816 14.376C38.0762 14.1305 38.2845 13.8354 38.4286 13.5079C38.5727 13.1805 38.6496 12.8275 38.6548 12.4699C38.66 12.1122 38.5934 11.7571 38.459 11.4256C38.3245 11.0941 38.1249 10.793 37.8719 10.5401C37.619 10.2871 37.3179 10.0875 36.9864 9.95304C36.6549 9.81856 36.2998 9.75195 35.9421 9.75717C35.5845 9.76238 35.2315 9.83931 34.9041 9.98339C34.5766 10.1275 34.2815 10.3358 34.036 10.596C33.5586 11.1021 33.2973 11.7742 33.3074 12.4699C33.3175 13.1655 33.5984 13.8298 34.0903 14.3217C34.5822 14.8136 35.2465 15.0945 35.9421 15.1046C36.6378 15.1147 37.3099 14.8534 37.816 14.376V14.376Z" fill="white"/>
    </svg>
    </a>

    </div>

      </div>  
    </div>
  
    <div className='posts'>
        {posts.map((post, index) => (
          <Post key={index} post={post} />
        ))}
      </div>
    </div>
  )
}

export async function getStaticProps() {
  // Get files from the posts dir
  const files = fs.readdirSync(path.join('posts'))

  // Get slug and frontmatter from posts
  const posts = files.map(filename => {
    // Create slug
    const slug = filename.replace('.md', '')

    // Get frontmatter
    const markdownWithMeta = fs.readFileSync(path.join('posts',
    filename), 'utf-8')

    const {data:frontmatter} = matter(markdownWithMeta)

    return {
      slug,
      frontmatter,
    }
  })

  return {
    props: {
      posts: posts.sort(sortByDate),
    },
  }
}